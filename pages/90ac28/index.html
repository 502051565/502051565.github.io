<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker 复杂安装 | lwy&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e1aa9d15d62220ec692a843c08c79000";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>        
    </script>
    <script src="https://fastly.jsdelivr.net/npm/twikoo@1.5.11/dist/twikoo.all.min.js"></script>
    <script href="./js/index.js" async="async"></script>
    <link rel="icon" href="https://cdn.staticaly.com/gh/xustudyxu/image-hosting@master/20220627/mmexport1656324824543.124zxwkqyzlc.webp">
    <script charset="utf-8" href="./js/main.js"></script>
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3077305_pt8umhrn4k9.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <meta name="description" content="一起学习编程!">
    <meta name="image" content="https://frxcat.fun/./assets/image-20221121102940765.png">
    <meta name="twitter:title" content="Docker 复杂安装">
    <meta name="twitter:description" content="">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://frxcat.fun/./assets/image-20221121102940765.png">
    <meta name="twitter:url" content="https://frxcat.fun/studynotes/project-management/Docker2/1.Docker_introduction_mysql_cluster.html">
    <meta name="twitter:site" content="@frxcat">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Docker 复杂安装">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://frxcat.fun/./assets/image-20221121102940765.png">
    <meta property="og:url" content="https://frxcat.fun/studynotes/project-management/Docker2/1.Docker_introduction_mysql_cluster.html">
    <meta property="og:site_name" content="frxcat">
    <meta property="article:published_time" content="2022-11-18T00:04:35.000Z">
    <meta property="article:tag" content="Docker">
    <meta itemprop="name" content="Docker 复杂安装">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://frxcat.fun/./assets/image-20221121102940765.png">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="baidu-site-verification" content="code-5aMKYEt9fV">
    <link rel="preload" href="/assets/css/0.styles.47be26a6.css" as="style"><link rel="preload" href="/assets/js/app.52078691.js" as="script"><link rel="preload" href="/assets/js/2.3705e0fd.js" as="script"><link rel="preload" href="/assets/js/6.145042a1.js" as="script"><link rel="preload" href="/assets/js/41.f9580004.js" as="script"><link rel="preload" href="/assets/js/62.88bcb186.js" as="script"><link rel="preload" href="/assets/js/68.17898152.js" as="script"><link rel="preload" href="/assets/js/53.6e4f0023.js" as="script"><link rel="preload" href="/assets/js/54.7ab2b710.js" as="script"><link rel="prefetch" href="/assets/js/10.9737349b.js"><link rel="prefetch" href="/assets/js/100.ce9d8915.js"><link rel="prefetch" href="/assets/js/101.f87843de.js"><link rel="prefetch" href="/assets/js/102.70976c26.js"><link rel="prefetch" href="/assets/js/103.af0ae479.js"><link rel="prefetch" href="/assets/js/104.08019755.js"><link rel="prefetch" href="/assets/js/105.5ba4095d.js"><link rel="prefetch" href="/assets/js/106.972a8f34.js"><link rel="prefetch" href="/assets/js/107.12e9ddb4.js"><link rel="prefetch" href="/assets/js/108.28e874b2.js"><link rel="prefetch" href="/assets/js/109.9b8d4781.js"><link rel="prefetch" href="/assets/js/11.b6770bd0.js"><link rel="prefetch" href="/assets/js/110.22af2046.js"><link rel="prefetch" href="/assets/js/111.e6983aec.js"><link rel="prefetch" href="/assets/js/112.1f240eff.js"><link rel="prefetch" href="/assets/js/113.d14bc345.js"><link rel="prefetch" href="/assets/js/114.4aa404d9.js"><link rel="prefetch" href="/assets/js/115.99538e07.js"><link rel="prefetch" href="/assets/js/116.208b8283.js"><link rel="prefetch" href="/assets/js/117.b1d409af.js"><link rel="prefetch" href="/assets/js/118.d47b4c00.js"><link rel="prefetch" href="/assets/js/119.370cd414.js"><link rel="prefetch" href="/assets/js/12.bd5c2d8b.js"><link rel="prefetch" href="/assets/js/120.1fa4e63b.js"><link rel="prefetch" href="/assets/js/121.a4fe7a0f.js"><link rel="prefetch" href="/assets/js/122.2bfb2933.js"><link rel="prefetch" href="/assets/js/123.aa149f19.js"><link rel="prefetch" href="/assets/js/124.e8464955.js"><link rel="prefetch" href="/assets/js/125.575955d0.js"><link rel="prefetch" href="/assets/js/126.4dff1740.js"><link rel="prefetch" href="/assets/js/127.09db1a96.js"><link rel="prefetch" href="/assets/js/128.943fa020.js"><link rel="prefetch" href="/assets/js/129.5aed95c9.js"><link rel="prefetch" href="/assets/js/13.9cbc2efd.js"><link rel="prefetch" href="/assets/js/130.245e9fdc.js"><link rel="prefetch" href="/assets/js/131.581380a1.js"><link rel="prefetch" href="/assets/js/132.60db6223.js"><link rel="prefetch" href="/assets/js/133.96797ef5.js"><link rel="prefetch" href="/assets/js/134.b688c12a.js"><link rel="prefetch" href="/assets/js/135.4e3da7b9.js"><link rel="prefetch" href="/assets/js/136.6ca77d45.js"><link rel="prefetch" href="/assets/js/137.bcb83ecf.js"><link rel="prefetch" href="/assets/js/138.4a67aa90.js"><link rel="prefetch" href="/assets/js/139.a9de0505.js"><link rel="prefetch" href="/assets/js/14.0503a1f8.js"><link rel="prefetch" href="/assets/js/140.000d224c.js"><link rel="prefetch" href="/assets/js/141.d4417d1a.js"><link rel="prefetch" href="/assets/js/142.9f63cf5c.js"><link rel="prefetch" href="/assets/js/143.52301d1e.js"><link rel="prefetch" href="/assets/js/144.183c8304.js"><link rel="prefetch" href="/assets/js/145.cafbbce0.js"><link rel="prefetch" href="/assets/js/146.b07ef39d.js"><link rel="prefetch" href="/assets/js/147.f8c98c90.js"><link rel="prefetch" href="/assets/js/148.a1db8613.js"><link rel="prefetch" href="/assets/js/149.3f6baedb.js"><link rel="prefetch" href="/assets/js/15.d34a8df4.js"><link rel="prefetch" href="/assets/js/150.d0ed51f5.js"><link rel="prefetch" href="/assets/js/151.b2b0401c.js"><link rel="prefetch" href="/assets/js/152.e650aea9.js"><link rel="prefetch" href="/assets/js/153.086cfb5b.js"><link rel="prefetch" href="/assets/js/154.996b563c.js"><link rel="prefetch" href="/assets/js/155.40fd70fa.js"><link rel="prefetch" href="/assets/js/156.69d0287c.js"><link rel="prefetch" href="/assets/js/157.5575a854.js"><link rel="prefetch" href="/assets/js/158.c8c3db15.js"><link rel="prefetch" href="/assets/js/159.62cfff25.js"><link rel="prefetch" href="/assets/js/16.6451f778.js"><link rel="prefetch" href="/assets/js/160.08eed556.js"><link rel="prefetch" href="/assets/js/161.309275e7.js"><link rel="prefetch" href="/assets/js/162.2eb8eaa9.js"><link rel="prefetch" href="/assets/js/163.44b7949e.js"><link rel="prefetch" href="/assets/js/164.6f6d645f.js"><link rel="prefetch" href="/assets/js/165.c5d88775.js"><link rel="prefetch" href="/assets/js/166.69dfbb33.js"><link rel="prefetch" href="/assets/js/167.4b1ee20c.js"><link rel="prefetch" href="/assets/js/168.1ed9dde6.js"><link rel="prefetch" href="/assets/js/169.e23242bb.js"><link rel="prefetch" href="/assets/js/17.7550e5c8.js"><link rel="prefetch" href="/assets/js/170.784b6d48.js"><link rel="prefetch" href="/assets/js/171.50a83b35.js"><link rel="prefetch" href="/assets/js/172.40c931dc.js"><link rel="prefetch" href="/assets/js/173.244612f1.js"><link rel="prefetch" href="/assets/js/174.4104b8a3.js"><link rel="prefetch" href="/assets/js/175.c2b2ee17.js"><link rel="prefetch" href="/assets/js/176.d8eaa441.js"><link rel="prefetch" href="/assets/js/177.e90c3831.js"><link rel="prefetch" href="/assets/js/178.30b27b94.js"><link rel="prefetch" href="/assets/js/179.854eb2e3.js"><link rel="prefetch" href="/assets/js/18.7a103199.js"><link rel="prefetch" href="/assets/js/180.350f5024.js"><link rel="prefetch" href="/assets/js/181.80b2d200.js"><link rel="prefetch" href="/assets/js/182.c2b971a6.js"><link rel="prefetch" href="/assets/js/183.74680f68.js"><link rel="prefetch" href="/assets/js/184.0325e3d7.js"><link rel="prefetch" href="/assets/js/185.ec78a717.js"><link rel="prefetch" href="/assets/js/186.dca301d6.js"><link rel="prefetch" href="/assets/js/187.42e89237.js"><link rel="prefetch" href="/assets/js/188.3d89a625.js"><link rel="prefetch" href="/assets/js/189.ec5bb043.js"><link rel="prefetch" href="/assets/js/19.df1fef81.js"><link rel="prefetch" href="/assets/js/190.fd14816e.js"><link rel="prefetch" href="/assets/js/191.8e55628c.js"><link rel="prefetch" href="/assets/js/192.ff48f421.js"><link rel="prefetch" href="/assets/js/193.03757d8b.js"><link rel="prefetch" href="/assets/js/194.6dbc284a.js"><link rel="prefetch" href="/assets/js/195.4ec15c3e.js"><link rel="prefetch" href="/assets/js/196.beda4d6e.js"><link rel="prefetch" href="/assets/js/197.5064a624.js"><link rel="prefetch" href="/assets/js/198.43286ea8.js"><link rel="prefetch" href="/assets/js/199.301b3707.js"><link rel="prefetch" href="/assets/js/20.e0e9251f.js"><link rel="prefetch" href="/assets/js/200.d54667f8.js"><link rel="prefetch" href="/assets/js/201.d3e38772.js"><link rel="prefetch" href="/assets/js/202.609eee44.js"><link rel="prefetch" href="/assets/js/203.891daf04.js"><link rel="prefetch" href="/assets/js/204.b1ec7758.js"><link rel="prefetch" href="/assets/js/205.419a76de.js"><link rel="prefetch" href="/assets/js/206.06dacd15.js"><link rel="prefetch" href="/assets/js/207.07d858a5.js"><link rel="prefetch" href="/assets/js/208.e9e9d1a3.js"><link rel="prefetch" href="/assets/js/209.eed886b0.js"><link rel="prefetch" href="/assets/js/21.b29bbfd0.js"><link rel="prefetch" href="/assets/js/210.1b3fc6c1.js"><link rel="prefetch" href="/assets/js/211.2828e206.js"><link rel="prefetch" href="/assets/js/212.b4145674.js"><link rel="prefetch" href="/assets/js/213.40581007.js"><link rel="prefetch" href="/assets/js/214.10021b7a.js"><link rel="prefetch" href="/assets/js/215.c63ea6cd.js"><link rel="prefetch" href="/assets/js/216.a4c7698a.js"><link rel="prefetch" href="/assets/js/217.1a0d8ee7.js"><link rel="prefetch" href="/assets/js/218.39707446.js"><link rel="prefetch" href="/assets/js/219.d88c14a5.js"><link rel="prefetch" href="/assets/js/22.40bd7391.js"><link rel="prefetch" href="/assets/js/220.f2426e81.js"><link rel="prefetch" href="/assets/js/221.ba868543.js"><link rel="prefetch" href="/assets/js/222.b176c69e.js"><link rel="prefetch" href="/assets/js/223.8d89753d.js"><link rel="prefetch" href="/assets/js/224.85f7d7c5.js"><link rel="prefetch" href="/assets/js/225.bc929c1a.js"><link rel="prefetch" href="/assets/js/226.c1a508ca.js"><link rel="prefetch" href="/assets/js/227.50eb23c4.js"><link rel="prefetch" href="/assets/js/228.c830f0ed.js"><link rel="prefetch" href="/assets/js/229.f85d6beb.js"><link rel="prefetch" href="/assets/js/23.4097c0c1.js"><link rel="prefetch" href="/assets/js/230.96c62d70.js"><link rel="prefetch" href="/assets/js/231.612e981b.js"><link rel="prefetch" href="/assets/js/232.6e0c1ae8.js"><link rel="prefetch" href="/assets/js/233.a1c9f425.js"><link rel="prefetch" href="/assets/js/234.d2e0ad23.js"><link rel="prefetch" href="/assets/js/235.279f0b35.js"><link rel="prefetch" href="/assets/js/236.7ab53cbc.js"><link rel="prefetch" href="/assets/js/237.43a4af2e.js"><link rel="prefetch" href="/assets/js/238.fe5c7fb7.js"><link rel="prefetch" href="/assets/js/239.75b41961.js"><link rel="prefetch" href="/assets/js/24.80d0ea88.js"><link rel="prefetch" href="/assets/js/240.51559559.js"><link rel="prefetch" href="/assets/js/241.694be33f.js"><link rel="prefetch" href="/assets/js/242.a703c270.js"><link rel="prefetch" href="/assets/js/243.da64b731.js"><link rel="prefetch" href="/assets/js/244.15eeffbb.js"><link rel="prefetch" href="/assets/js/245.5f3dc510.js"><link rel="prefetch" href="/assets/js/246.784553ea.js"><link rel="prefetch" href="/assets/js/247.f8ea5fdf.js"><link rel="prefetch" href="/assets/js/248.bada25c2.js"><link rel="prefetch" href="/assets/js/249.bc9dd416.js"><link rel="prefetch" href="/assets/js/25.e8691b15.js"><link rel="prefetch" href="/assets/js/250.1f4519ae.js"><link rel="prefetch" href="/assets/js/251.9f27016e.js"><link rel="prefetch" href="/assets/js/252.9789c0ce.js"><link rel="prefetch" href="/assets/js/253.61d9c2ff.js"><link rel="prefetch" href="/assets/js/254.462c1534.js"><link rel="prefetch" href="/assets/js/255.31d681e1.js"><link rel="prefetch" href="/assets/js/256.3f32f819.js"><link rel="prefetch" href="/assets/js/257.d63fd914.js"><link rel="prefetch" href="/assets/js/258.5bcfe9aa.js"><link rel="prefetch" href="/assets/js/259.b90ca4b1.js"><link rel="prefetch" href="/assets/js/26.4811050d.js"><link rel="prefetch" href="/assets/js/260.ec35a84d.js"><link rel="prefetch" href="/assets/js/261.adaf3e9c.js"><link rel="prefetch" href="/assets/js/262.ffb4323c.js"><link rel="prefetch" href="/assets/js/263.7eac7f34.js"><link rel="prefetch" href="/assets/js/264.20216400.js"><link rel="prefetch" href="/assets/js/265.63289daa.js"><link rel="prefetch" href="/assets/js/266.e575e597.js"><link rel="prefetch" href="/assets/js/267.b4d4982d.js"><link rel="prefetch" href="/assets/js/268.fb0ad32c.js"><link rel="prefetch" href="/assets/js/269.eff28f67.js"><link rel="prefetch" href="/assets/js/27.9457ca9e.js"><link rel="prefetch" href="/assets/js/270.0fe5a756.js"><link rel="prefetch" href="/assets/js/271.965a0032.js"><link rel="prefetch" href="/assets/js/272.dadc37da.js"><link rel="prefetch" href="/assets/js/273.74c233e5.js"><link rel="prefetch" href="/assets/js/274.faaf2837.js"><link rel="prefetch" href="/assets/js/275.ebf1a886.js"><link rel="prefetch" href="/assets/js/276.88095e66.js"><link rel="prefetch" href="/assets/js/277.8de99fb3.js"><link rel="prefetch" href="/assets/js/278.c5ccf883.js"><link rel="prefetch" href="/assets/js/279.d2a2a622.js"><link rel="prefetch" href="/assets/js/28.15e050ac.js"><link rel="prefetch" href="/assets/js/280.ccc75b75.js"><link rel="prefetch" href="/assets/js/281.6a99caed.js"><link rel="prefetch" href="/assets/js/282.1a5662a1.js"><link rel="prefetch" href="/assets/js/283.3f1abb3d.js"><link rel="prefetch" href="/assets/js/284.e8083077.js"><link rel="prefetch" href="/assets/js/285.d5502c5a.js"><link rel="prefetch" href="/assets/js/286.0bf35ff3.js"><link rel="prefetch" href="/assets/js/287.f8606aa4.js"><link rel="prefetch" href="/assets/js/288.43aafdd0.js"><link rel="prefetch" href="/assets/js/289.1f225e1f.js"><link rel="prefetch" href="/assets/js/29.fc604ea8.js"><link rel="prefetch" href="/assets/js/290.511c1ecb.js"><link rel="prefetch" href="/assets/js/291.2a97f2f8.js"><link rel="prefetch" href="/assets/js/292.60f07469.js"><link rel="prefetch" href="/assets/js/293.513e4f12.js"><link rel="prefetch" href="/assets/js/294.1e3142f1.js"><link rel="prefetch" href="/assets/js/295.f6dd6bb0.js"><link rel="prefetch" href="/assets/js/296.f27849d1.js"><link rel="prefetch" href="/assets/js/297.8299d6c2.js"><link rel="prefetch" href="/assets/js/298.736bb09f.js"><link rel="prefetch" href="/assets/js/299.1a1d84bb.js"><link rel="prefetch" href="/assets/js/3.34330720.js"><link rel="prefetch" href="/assets/js/30.0dc5bdaf.js"><link rel="prefetch" href="/assets/js/300.b1e44f73.js"><link rel="prefetch" href="/assets/js/301.f4b3766a.js"><link rel="prefetch" href="/assets/js/302.1b3978e5.js"><link rel="prefetch" href="/assets/js/303.1d2d380e.js"><link rel="prefetch" href="/assets/js/304.9b1eb3e1.js"><link rel="prefetch" href="/assets/js/305.c0a6482f.js"><link rel="prefetch" href="/assets/js/306.2da8847d.js"><link rel="prefetch" href="/assets/js/307.de86dbf4.js"><link rel="prefetch" href="/assets/js/308.64af9f4e.js"><link rel="prefetch" href="/assets/js/309.a43d581f.js"><link rel="prefetch" href="/assets/js/31.56b3711d.js"><link rel="prefetch" href="/assets/js/310.4d6c6ec0.js"><link rel="prefetch" href="/assets/js/311.10e0994d.js"><link rel="prefetch" href="/assets/js/312.444c5360.js"><link rel="prefetch" href="/assets/js/313.ae5b8015.js"><link rel="prefetch" href="/assets/js/314.48737017.js"><link rel="prefetch" href="/assets/js/315.a8d7c9f0.js"><link rel="prefetch" href="/assets/js/316.2ce73af7.js"><link rel="prefetch" href="/assets/js/317.8bbe6a4f.js"><link rel="prefetch" href="/assets/js/318.18ea088d.js"><link rel="prefetch" href="/assets/js/319.f99b3850.js"><link rel="prefetch" href="/assets/js/32.98e21745.js"><link rel="prefetch" href="/assets/js/320.bf33a93f.js"><link rel="prefetch" href="/assets/js/321.7795d606.js"><link rel="prefetch" href="/assets/js/322.15ee300f.js"><link rel="prefetch" href="/assets/js/323.8f69f55d.js"><link rel="prefetch" href="/assets/js/324.56376288.js"><link rel="prefetch" href="/assets/js/325.1ddb3a11.js"><link rel="prefetch" href="/assets/js/326.dd92c51e.js"><link rel="prefetch" href="/assets/js/327.636535c1.js"><link rel="prefetch" href="/assets/js/328.ecab5d99.js"><link rel="prefetch" href="/assets/js/329.f3471637.js"><link rel="prefetch" href="/assets/js/33.5cb151f0.js"><link rel="prefetch" href="/assets/js/330.6bcc345d.js"><link rel="prefetch" href="/assets/js/331.2c6587ef.js"><link rel="prefetch" href="/assets/js/332.55251f19.js"><link rel="prefetch" href="/assets/js/333.913c2b69.js"><link rel="prefetch" href="/assets/js/334.35003154.js"><link rel="prefetch" href="/assets/js/335.9801f78b.js"><link rel="prefetch" href="/assets/js/336.0e7bcd51.js"><link rel="prefetch" href="/assets/js/337.a1d950ac.js"><link rel="prefetch" href="/assets/js/338.8715b7e7.js"><link rel="prefetch" href="/assets/js/339.aa147c68.js"><link rel="prefetch" href="/assets/js/34.d8f76763.js"><link rel="prefetch" href="/assets/js/340.7f66359e.js"><link rel="prefetch" href="/assets/js/341.16692663.js"><link rel="prefetch" href="/assets/js/342.acae3279.js"><link rel="prefetch" href="/assets/js/343.fb6498a0.js"><link rel="prefetch" href="/assets/js/344.d987f6c4.js"><link rel="prefetch" href="/assets/js/345.2e2a1575.js"><link rel="prefetch" href="/assets/js/346.23cb7ed6.js"><link rel="prefetch" href="/assets/js/347.dc457dab.js"><link rel="prefetch" href="/assets/js/348.d278ae56.js"><link rel="prefetch" href="/assets/js/349.f472beb4.js"><link rel="prefetch" href="/assets/js/35.1927e840.js"><link rel="prefetch" href="/assets/js/350.693f46d7.js"><link rel="prefetch" href="/assets/js/351.8379e2bc.js"><link rel="prefetch" href="/assets/js/352.3c7bdcc6.js"><link rel="prefetch" href="/assets/js/353.327ce979.js"><link rel="prefetch" href="/assets/js/354.cd7508a0.js"><link rel="prefetch" href="/assets/js/355.6180aaad.js"><link rel="prefetch" href="/assets/js/356.66d21afe.js"><link rel="prefetch" href="/assets/js/357.acd36a95.js"><link rel="prefetch" href="/assets/js/358.543c7a5f.js"><link rel="prefetch" href="/assets/js/359.c255a149.js"><link rel="prefetch" href="/assets/js/36.0d770678.js"><link rel="prefetch" href="/assets/js/37.3bdb5cfe.js"><link rel="prefetch" href="/assets/js/38.3aedc88f.js"><link rel="prefetch" href="/assets/js/39.7033fe79.js"><link rel="prefetch" href="/assets/js/4.a76891f2.js"><link rel="prefetch" href="/assets/js/40.8ad3fb1f.js"><link rel="prefetch" href="/assets/js/42.e363d915.js"><link rel="prefetch" href="/assets/js/43.1132b9a3.js"><link rel="prefetch" href="/assets/js/44.fdaae5bc.js"><link rel="prefetch" href="/assets/js/45.d73821d7.js"><link rel="prefetch" href="/assets/js/46.bf9a345e.js"><link rel="prefetch" href="/assets/js/47.5c4abc58.js"><link rel="prefetch" href="/assets/js/48.34950cd2.js"><link rel="prefetch" href="/assets/js/49.1ec0762a.js"><link rel="prefetch" href="/assets/js/5.65db3320.js"><link rel="prefetch" href="/assets/js/50.652c485a.js"><link rel="prefetch" href="/assets/js/51.877b9a08.js"><link rel="prefetch" href="/assets/js/52.ead5e03f.js"><link rel="prefetch" href="/assets/js/55.1a84271a.js"><link rel="prefetch" href="/assets/js/56.7ec80127.js"><link rel="prefetch" href="/assets/js/57.b81aaa00.js"><link rel="prefetch" href="/assets/js/58.6ac03d81.js"><link rel="prefetch" href="/assets/js/59.0d1a6f34.js"><link rel="prefetch" href="/assets/js/60.f62b6344.js"><link rel="prefetch" href="/assets/js/61.9e4959cd.js"><link rel="prefetch" href="/assets/js/63.7df25f03.js"><link rel="prefetch" href="/assets/js/64.247e1298.js"><link rel="prefetch" href="/assets/js/65.c8329589.js"><link rel="prefetch" href="/assets/js/66.68670215.js"><link rel="prefetch" href="/assets/js/67.1765e15d.js"><link rel="prefetch" href="/assets/js/69.fd3bd675.js"><link rel="prefetch" href="/assets/js/7.64b824a1.js"><link rel="prefetch" href="/assets/js/70.be083088.js"><link rel="prefetch" href="/assets/js/71.34d2826d.js"><link rel="prefetch" href="/assets/js/72.19ab5be1.js"><link rel="prefetch" href="/assets/js/73.19afbfb9.js"><link rel="prefetch" href="/assets/js/74.f6adbfae.js"><link rel="prefetch" href="/assets/js/75.5d6ed878.js"><link rel="prefetch" href="/assets/js/76.a98f9057.js"><link rel="prefetch" href="/assets/js/77.2c7ee7a9.js"><link rel="prefetch" href="/assets/js/78.65ea061d.js"><link rel="prefetch" href="/assets/js/79.4893c957.js"><link rel="prefetch" href="/assets/js/8.7ff72049.js"><link rel="prefetch" href="/assets/js/80.72463664.js"><link rel="prefetch" href="/assets/js/81.99bc6553.js"><link rel="prefetch" href="/assets/js/82.653fa55a.js"><link rel="prefetch" href="/assets/js/83.0878479e.js"><link rel="prefetch" href="/assets/js/84.82a035c3.js"><link rel="prefetch" href="/assets/js/85.1b7de756.js"><link rel="prefetch" href="/assets/js/86.327e80da.js"><link rel="prefetch" href="/assets/js/87.51de929e.js"><link rel="prefetch" href="/assets/js/88.211a0254.js"><link rel="prefetch" href="/assets/js/89.ca5538d2.js"><link rel="prefetch" href="/assets/js/9.158c7fa3.js"><link rel="prefetch" href="/assets/js/90.d5e79edf.js"><link rel="prefetch" href="/assets/js/91.1be6359e.js"><link rel="prefetch" href="/assets/js/92.cbb1aa69.js"><link rel="prefetch" href="/assets/js/93.59feba4a.js"><link rel="prefetch" href="/assets/js/94.8cc33ac2.js"><link rel="prefetch" href="/assets/js/95.b0ae84fc.js"><link rel="prefetch" href="/assets/js/96.d019867f.js"><link rel="prefetch" href="/assets/js/97.3271008e.js"><link rel="prefetch" href="/assets/js/98.85cad3d9.js"><link rel="prefetch" href="/assets/js/99.45fc9fb4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.47be26a6.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">lwy's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/pages/f6054a/" class="nav-link">导航🚀​</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e05ef5/" class="nav-link">JavaSE</a></li></ul></li><li class="dropdown-item"><h4>JavaWeb</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5cda88/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/cea341/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/pages/8f83ba/" class="nav-link">Servlet</a></li><li class="dropdown-subitem"><a href="/pages/8bc1c4/" class="nav-link">MVC</a></li><li class="dropdown-subitem"><a href="/pages/f883e2/" class="nav-link">filter|listener</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring生态" class="dropdown-title"><!----> <span class="title" style="display:;">Spring生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/462a90/" class="nav-link">Spring5</a></li><li class="dropdown-item"><!----> <a href="/pages/2e990c/" class="nav-link">SpringMVC</a></li><li class="dropdown-item"><!----> <a href="/pages/0d4af0/" class="nav-link">SpringBoot2</a></li><li class="dropdown-item"><!----> <a href="/pages/870083/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/pages/66babb/" class="nav-link">SpringSecurity</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>搜索引擎</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/596552/" class="nav-link">ElasticSearch</a></li></ul></li><li class="dropdown-item"><h4>消息队列</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e645d9/" class="nav-link">RabbitMQ</a></li></ul></li><li class="dropdown-item"><h4>服务器</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9551ee/" class="nav-link">Nginx🌐</a></li></ul></li><li class="dropdown-item"><h4>服务框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/48771f/" class="nav-link">Dubbo</a></li></ul></li><li class="dropdown-item"><h4>常用框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/46271f/" class="nav-link">SSO</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b9268d/" class="nav-link">Python基础</a></li><li class="dropdown-subitem"><a href="/pages/e0bd06/" class="nav-link">数据分析</a></li></ul></li><li class="dropdown-item"><h4>环境搭建</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/600247/" class="nav-link">Hadoop集群</a></li><li class="dropdown-subitem"><a href="/pages/cdeb68/" class="nav-link">KVM虚拟化技术</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e72480/" class="nav-link">MySQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7ab056/" class="nav-link">NoSQL数据库概论</a></li><li class="dropdown-subitem"><a href="/pages/e9cc9f/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/pages/91197c/" class="nav-link">MongoDB</a></li><li class="dropdown-subitem"><a href="/pages/2aae92/" class="nav-link">HBase</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0e424f/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/pages/e0594a/" class="nav-link">MyBatis-Plus</a></li><li class="dropdown-subitem"><a href="/pages/1f54f3/" class="nav-link">ShardingSphere</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><!----> <span class="title" style="display:;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/99e9dc/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/90cc29/" class="nav-link">Docker基础</a></li><li class="dropdown-subitem"><a href="/pages/90ac28/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Docker高级</a></li></ul></li><li class="dropdown-item"><h4>管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/45eca1/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/pages/34892c/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><!----> <span class="title" style="display:;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/40ee62/" class="nav-link">力扣算法题</a></li><li class="dropdown-item"><!----> <a href="/pages/39659d/" class="nav-link">基础开发篇</a></li><li class="dropdown-item"><h4>进阶篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/60k8c2/" class="nav-link">中高进阶篇</a></li><li class="dropdown-subitem"><a href="/pages/29c8c2/" class="nav-link">谷粒商城</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/myfriends/" class="nav-link">友情链接</a></li><li class="dropdown-item"><!----> <a href="/pages/mdUse/" class="nav-link">md使用</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="本站" class="dropdown-title"><!----> <span class="title" style="display:;">本站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>索引</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9013e4/" class="nav-link">关于</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="img/qie.png"> <div class="blogger-info"><h3>lwy</h3> <span>一起学习编程!</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/pages/f6054a/" class="nav-link">导航🚀​</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e05ef5/" class="nav-link">JavaSE</a></li></ul></li><li class="dropdown-item"><h4>JavaWeb</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5cda88/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/cea341/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/pages/8f83ba/" class="nav-link">Servlet</a></li><li class="dropdown-subitem"><a href="/pages/8bc1c4/" class="nav-link">MVC</a></li><li class="dropdown-subitem"><a href="/pages/f883e2/" class="nav-link">filter|listener</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring生态" class="dropdown-title"><!----> <span class="title" style="display:;">Spring生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/462a90/" class="nav-link">Spring5</a></li><li class="dropdown-item"><!----> <a href="/pages/2e990c/" class="nav-link">SpringMVC</a></li><li class="dropdown-item"><!----> <a href="/pages/0d4af0/" class="nav-link">SpringBoot2</a></li><li class="dropdown-item"><!----> <a href="/pages/870083/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/pages/66babb/" class="nav-link">SpringSecurity</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>搜索引擎</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/596552/" class="nav-link">ElasticSearch</a></li></ul></li><li class="dropdown-item"><h4>消息队列</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e645d9/" class="nav-link">RabbitMQ</a></li></ul></li><li class="dropdown-item"><h4>服务器</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9551ee/" class="nav-link">Nginx🌐</a></li></ul></li><li class="dropdown-item"><h4>服务框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/48771f/" class="nav-link">Dubbo</a></li></ul></li><li class="dropdown-item"><h4>常用框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/46271f/" class="nav-link">SSO</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b9268d/" class="nav-link">Python基础</a></li><li class="dropdown-subitem"><a href="/pages/e0bd06/" class="nav-link">数据分析</a></li></ul></li><li class="dropdown-item"><h4>环境搭建</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/600247/" class="nav-link">Hadoop集群</a></li><li class="dropdown-subitem"><a href="/pages/cdeb68/" class="nav-link">KVM虚拟化技术</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e72480/" class="nav-link">MySQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7ab056/" class="nav-link">NoSQL数据库概论</a></li><li class="dropdown-subitem"><a href="/pages/e9cc9f/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/pages/91197c/" class="nav-link">MongoDB</a></li><li class="dropdown-subitem"><a href="/pages/2aae92/" class="nav-link">HBase</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0e424f/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/pages/e0594a/" class="nav-link">MyBatis-Plus</a></li><li class="dropdown-subitem"><a href="/pages/1f54f3/" class="nav-link">ShardingSphere</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><!----> <span class="title" style="display:;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/99e9dc/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/90cc29/" class="nav-link">Docker基础</a></li><li class="dropdown-subitem"><a href="/pages/90ac28/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Docker高级</a></li></ul></li><li class="dropdown-item"><h4>管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/45eca1/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/pages/34892c/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><!----> <span class="title" style="display:;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/40ee62/" class="nav-link">力扣算法题</a></li><li class="dropdown-item"><!----> <a href="/pages/39659d/" class="nav-link">基础开发篇</a></li><li class="dropdown-item"><h4>进阶篇</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/60k8c2/" class="nav-link">中高进阶篇</a></li><li class="dropdown-subitem"><a href="/pages/29c8c2/" class="nav-link">谷粒商城</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/myfriends/" class="nav-link">友情链接</a></li><li class="dropdown-item"><!----> <a href="/pages/mdUse/" class="nav-link">md使用</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="本站" class="dropdown-title"><!----> <span class="title" style="display:;">本站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>索引</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9013e4/" class="nav-link">关于</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/99e9dc/" class="sidebar-link">Linux基础篇</a></li><li><a href="/pages/1fe607/" class="sidebar-link">Linux 目录结构</a></li><li><a href="/pages/1918b9/" class="sidebar-link">Linux 远程登录到Linux服务器</a></li><li><a href="/pages/5b448c/" class="sidebar-link">Linux  Vi和Vim编辑器</a></li><li><a href="/pages/4c6bf1/" class="sidebar-link">Linux 虚拟机关机、重启和用户登录注销</a></li><li><a href="/pages/4a4e9c/" class="sidebar-link">Linux 用户管理</a></li><li><a href="/pages/0eff5f/" class="sidebar-link">Linux 实用指令</a></li><li><a href="/pages/da93a6/" class="sidebar-link">Linux 组管理和权限管理</a></li><li><a href="/pages/9c548f/" class="sidebar-link">Linux 定时任务调度</a></li><li><a href="/pages/2ad04f/" class="sidebar-link">Linux 磁盘分区、挂载</a></li><li><a href="/pages/dd2b33/" class="sidebar-link">Linux 网络配置</a></li><li><a href="/pages/13dd0d/" class="sidebar-link">Linux 进程管理</a></li><li><a href="/pages/e6052e/" class="sidebar-link">Linux RPM与YUM</a></li><li><a href="/pages/7e23ae/" class="sidebar-link">Linux 搭建JavaEE环境</a></li><li><a href="/pages/728064/" class="sidebar-link">Linux Shell编程</a></li><li><a href="/pages/ff3dc9/" class="sidebar-link">Linux Python开发平台Ubuntu</a></li><li><a href="/pages/c0fd71/" class="sidebar-link">Python定制篇-APT软件管理和远程登录</a></li><li><a href="/pages/27fd70/" class="sidebar-link">Linux 日志管理</a></li><li><a href="/pages/c3ac10/" class="sidebar-link">Linux 定制自己的Linux</a></li><li><a href="/pages/d65aa2/" class="sidebar-link">Linux 源码介绍&amp;内核升级</a></li><li><a href="/pages/9197f8/" class="sidebar-link">Linux 备份与恢复</a></li><li><a href="/pages/1b25c9/" class="sidebar-link">Linux 可视化管理-webmin和bt运维工具</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Docker基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/90cc29/" class="sidebar-link">Docker 简介</a></li><li><a href="/project-management/Docker/2.Docker_install/" class="sidebar-link">Docker 安装</a></li><li><a href="/project-management/3.Docker/Docker_Command/" class="sidebar-link">Docker 常用命令</a></li><li><a href="/project-management/Docker/4.Docker_images_principle/" class="sidebar-link">Docker 镜像原理</a></li><li><a href="/project-management/Docker/5.Local_images_are_published_to_Alibaba_Cloud/" class="sidebar-link">本地镜像发布到阿里云</a></li><li><a href="/project-management/Docker/6.Push_the_local_image_to_the_private_library/" class="sidebar-link">将本地镜像推送到私有库</a></li><li><a href="/project-management/Docker/7.Docker_data_volume/" class="sidebar-link">Docker 数据卷</a></li><li><a href="/project-management/Docker/8.Docker_Software_installation/" class="sidebar-link">Docker 软件安装</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Docker高级</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/90ac28/" aria-current="page" class="active sidebar-link">Docker 复杂安装</a></li><li><a href="/project-management/Docker2/2.Docker_Dockerfile/" class="sidebar-link">Dockerfile</a></li><li><a href="/project-management/Docker2/3.Docker_Service/" class="sidebar-link">Docker 微服务实战</a></li><li><a href="/project-management/Docker2/4.Docker_Network/" class="sidebar-link">Docker 网络</a></li><li><a href="/project-management/Docker2/5.Docker_compose/" class="sidebar-link">Compose容器编排</a></li><li><a href="/project-management/Docker2/6.Docker_Portainer/" class="sidebar-link">Docker-Portainer</a></li><li><a href="/project-management/Docker2/7.Docker_CAdvisor_InfluxDB/" class="sidebar-link">轻量级可视化工具</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Maven</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/45eca1/" class="sidebar-link">Maven 简介</a></li><li><a href="/pages/f5fbac/" class="sidebar-link">Maven 基础</a></li><li><a href="/pages/61c56d/" class="sidebar-link">Maven 高级</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Git 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/34892c/" class="sidebar-link">Git 概述</a></li><li><a href="/pages/fecc39/" class="sidebar-link">Git 安装</a></li><li><a href="/pages/e5b885/" class="sidebar-link">Git 常用命令</a></li><li><a href="/pages/8d7d1d/" class="sidebar-link">Git 分支操作</a></li><li><a href="/pages/4c7b56/" class="sidebar-link">Git 团队协作机制</a></li><li><a href="/pages/062fb4/" class="sidebar-link">IDEA 集成Git</a></li><li><a href="/pages/03bcc4/" class="sidebar-link">IDEA 集成 GitHub</a></li><li><a href="/pages/68b3e1/" class="sidebar-link">自建代码托管平台-GitLab</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=studynotes" title="分类" data-v-06225672>studynotes</a></li><li data-v-06225672><a href="/categories/?category=project-management" title="分类" data-v-06225672>project-management</a></li><li data-v-06225672><a href="/categories/?category=Docker2" title="分类" data-v-06225672>Docker2</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>lwy</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-11-18</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Docker 复杂安装<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="_1-docker-复杂安装详说"><a href="#_1-docker-复杂安装详说" class="header-anchor">#</a> 1.Docker 复杂安装详说</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-安装mysql主从复制搭建步骤">1.安装mysql主从复制搭建步骤</a><ul><li><a href="#_1-1-新建主服务器容器实例-端口-3309">1.1.新建主服务器容器实例 端口 3309</a></li><li><a href="#_1-2-进入-docker-mysqlmaster-conf目录下新建my-cnf">1.2.进入/docker/mysqlMaster/conf目录下新建my.cnf</a></li><li><a href="#_1-3-修改完配置后重启master实例">1.3.修改完配置后重启master实例</a></li><li><a href="#_1-4-进入mysql-master容器">1.4.进入mysql-master容器</a></li><li><a href="#_1-5-master容器实例内创建数据同步用户">1.5.master容器实例内创建数据同步用户</a></li><li><a href="#_1-6-新建从服务器实例3310">1.6.新建从服务器实例3310</a></li><li><a href="#_1-7-进入-docker-mysqlslave-conf目录下新建my-cnf">1.7.进入/docker/mysqlSlave/conf目录下新建my.cnf</a></li><li><a href="#_1-8-重启从mysql">1.8.重启从mysql</a></li><li><a href="#_1-9-在主mysql3309中查看">1.9.在主mysql3309中查看</a></li><li><a href="#_1-10-进入从库mysql3310">1.10.进入从库mysql3310</a></li><li><a href="#_1-11-在从数据库中配置主从复制">1.11.在从数据库中配置主从复制</a></li><li><a href="#_1-12-在从数据库中查看主从同步状态">1.12.在从数据库中查看主从同步状态</a></li><li><a href="#_1-13-在从库中开启主从同步">1.13.在从库中开启主从同步</a></li><li><a href="#_1-14-查看从数据库中状态">1.14.查看从数据库中状态</a></li><li><a href="#_1-15-主从复制测试">1.15.主从复制测试</a></li></ul></li><li><a href="#_2-cluster-集群-模式-docker版">2.cluster(集群)模式-docker版</a><ul><li><a href="#_2-1-哈希槽概念">2.1.哈希槽概念</a></li></ul></li><li><a href="#_3-cluster-集群-实战">3.cluster(集群)实战</a><ul><li><a href="#_3-1-3主3从redis集群扩缩容配置案例架构说明">3.1.3主3从redis集群扩缩容配置案例架构说明</a></li><li><a href="#_3-2主3从redis集群配置步骤">3.2主3从redis集群配置步骤</a></li><li><a href="#_3-3-验证">3.3.验证</a></li><li><a href="#_3-4-容错切换迁移案例">3.4.容错切换迁移案例</a></li><li><a href="#_3-5-主从扩容案例">3.5.主从扩容案例</a></li><li><a href="#_3-6-主从缩容案例">3.6.主从缩容案例</a></li></ul></li></ul></div><p></p> <h2 id="_1-安装mysql主从复制搭建步骤"><a href="#_1-安装mysql主从复制搭建步骤" class="header-anchor">#</a> 1.安装mysql主从复制搭建步骤</h2> <h3 id="_1-1-新建主服务器容器实例-端口-3309"><a href="#_1-1-新建主服务器容器实例-端口-3309" class="header-anchor">#</a> 1.1.新建主服务器容器实例 端口 3309</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#首先创建目录 /docker/mysqlMaster/</span>
<span class="token function">mkdir</span> /mydata
<span class="token function">mkdir</span> /mysqlMaster/
<span class="token comment">#执行下面命令</span>
<span class="token function">docker</span> run -d <span class="token punctuation">\</span>
    --name mysqlMaster <span class="token punctuation">\</span>
    --restart always <span class="token punctuation">\</span>
    -p <span class="token number">3309</span>:3306 <span class="token punctuation">\</span>
    -e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
    -v /docker/mysqlMaster/data:/var/lib/mysql <span class="token punctuation">\</span>
    -v /docker/mysqlMaster/conf:/etc/mysql/conf.d <span class="token punctuation">\</span>
    -v /docker/mysqlMaster/log:/var/log <span class="token punctuation">\</span>
    mysql:5.7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>如果报下面错误的话，解决方法</p> <p><img alt="image-20221121102940765" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#查看容器，看是不是容器重名</span>
<span class="token function">docker</span> <span class="token function">ps</span> -a
<span class="token comment">#查看进程，将绑定端口进程杀掉</span>
<span class="token function">ps</span> -aux <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token function">grep</span> <span class="token operator">|</span> <span class="token function">grep</span> docker-proxy
<span class="token function">kill</span> -9 进程id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_1-2-进入-docker-mysqlmaster-conf目录下新建my-cnf"><a href="#_1-2-进入-docker-mysqlmaster-conf目录下新建my-cnf" class="header-anchor">#</a> 1.2.进入/docker/mysqlMaster/conf目录下新建my.cnf</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /docker/mysqlMaster/conf
<span class="token function">vi</span> my.cnf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>复制下面的内容到my.cnf里面</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token comment">## 设置server_id，同一局域网中需要唯一</span>
<span class="token assign-left variable">server_id</span><span class="token operator">=</span><span class="token number">101</span>
<span class="token comment">## 指定不需要同步的数据库名称</span>
binlog-ignore-db<span class="token operator">=</span>mysql
<span class="token comment">## 开启二进制日志功能</span>
log-bin<span class="token operator">=</span>mysql-bin
<span class="token comment">## 设置二进制日志使用内存大小（事务）</span>
<span class="token assign-left variable">binlog_cache_size</span><span class="token operator">=</span>1M
<span class="token comment">## 设置使用的二进制日志格式（mixed,statement,row）</span>
<span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>mixed
<span class="token comment">## 二进制日志过期清理时间。默认值为0，表示不自动清理。</span>
<span class="token assign-left variable">expire_logs_days</span><span class="token operator">=</span><span class="token number">7</span>
<span class="token comment">## 跳过主从复制中遇到的所有错误或指定类型的错误，避免slave端复制中断。</span>
<span class="token comment">## 如：1062错误是指一些主键重复，1032错误是因为主从数据库数据不一致</span>
<span class="token assign-left variable">slave_skip_errors</span><span class="token operator">=</span><span class="token number">1062</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_1-3-修改完配置后重启master实例"><a href="#_1-3-修改完配置后重启master实例" class="header-anchor">#</a> 1.3.修改完配置后重启master实例</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> restart mysqlMaster
<span class="token comment">#验证是否启动成功</span>
<span class="token function">docker</span> <span class="token function">ps</span>
<span class="token comment">#如果没有mysql启动的容器，说明启动失败，那么可以通过下面的命令查看启动失败的日志</span>
<span class="token function">docker</span> logs 容器id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>可以看到下面错误信息</p> <p><img alt="image-20221121105831445" data-src="/assets/img/image-20221121105831445.9506220e.png" loading="lazy" class="lazy"></p> <p>修改my.cnf 多一些空格或者什么，改完之后重启mysql ，发现启动成功</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>root@noed2 conf<span class="token punctuation">]</span><span class="token comment"># docker start b7f382c864dd</span>
b7f382c864dd
<span class="token punctuation">[</span>root@noed2 conf<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE       COMMAND                  CREATED          STATUS         PORTS                                                  NAMES
b7f382c864dd   mysql:5.7   <span class="token string">&quot;docker-entrypoint.s…&quot;</span>   <span class="token number">19</span> minutes ago   Up <span class="token number">5</span> seconds   <span class="token number">33060</span>/tcp, <span class="token number">0.0</span>.0.0:3307-<span class="token operator">&gt;</span><span class="token number">3306</span>/tcp, :::3307-<span class="token operator">&gt;</span><span class="token number">3306</span>/tcp   mysql-master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_1-4-进入mysql-master容器"><a href="#_1-4-进入mysql-master容器" class="header-anchor">#</a> 1.4.进入mysql-master容器</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it mysql-master /bin/bash
<span class="token comment">#连接mysql</span>
mysql -uroot -p
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_1-5-master容器实例内创建数据同步用户"><a href="#_1-5-master容器实例内创建数据同步用户" class="header-anchor">#</a> 1.5.master容器实例内创建数据同步用户</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>CREATE <span class="token environment constant">USER</span> <span class="token string">'slave'</span>@<span class="token string">'%'</span> IDENTIFIED BY <span class="token string">'123456'</span><span class="token punctuation">;</span>
GRANT REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO <span class="token string">'slave'</span>@<span class="token string">'%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_1-6-新建从服务器实例3310"><a href="#_1-6-新建从服务器实例3310" class="header-anchor">#</a> 1.6.新建从服务器实例3310</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#首先创建目录 /docker/mysqlSlave/</span>
<span class="token function">mkdir</span> /mysqlSlave/
<span class="token comment">#执行下面命令</span>
<span class="token function">docker</span> run -d <span class="token punctuation">\</span>
    --name mysqlSlave <span class="token punctuation">\</span>
    --restart always <span class="token punctuation">\</span>
    -p <span class="token number">3310</span>:3306 <span class="token punctuation">\</span>
    -e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
    -v /docker/mysqlSlave/data:/var/lib/mysql <span class="token punctuation">\</span>
    -v /docker/mysqlSlave/conf:/etc/mysql/conf.d <span class="token punctuation">\</span>
    -v /docker/mysqlSlave/log:/var/log <span class="token punctuation">\</span>
    mysql:5.7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_1-7-进入-docker-mysqlslave-conf目录下新建my-cnf"><a href="#_1-7-进入-docker-mysqlslave-conf目录下新建my-cnf" class="header-anchor">#</a> 1.7.进入/docker/mysqlSlave/conf目录下新建my.cnf</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /docker/mysqlSlave/conf
<span class="token function">vi</span> my.cnf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>添加下面内容</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token comment">## 设置server_id，同一局域网中需要唯一</span>
<span class="token assign-left variable">server_id</span><span class="token operator">=</span><span class="token number">102</span>
<span class="token comment">## 指定不需要同步的数据库名称</span>
binlog-ignore-db<span class="token operator">=</span>mysql
<span class="token comment">## 开启二进制日志功能，以备Slave作为其它数据库实例的Master时使用</span>
log-bin<span class="token operator">=</span>mall-mysql-slave1-bin
<span class="token comment">## 设置二进制日志使用内存大小（事务）</span>
<span class="token assign-left variable">binlog_cache_size</span><span class="token operator">=</span>1M
<span class="token comment">## 设置使用的二进制日志格式（mixed,statement,row）</span>
<span class="token assign-left variable">binlog_format</span><span class="token operator">=</span>mixed
<span class="token comment">## 二进制日志过期清理时间。默认值为0，表示不自动清理。</span>
<span class="token assign-left variable">expire_logs_days</span><span class="token operator">=</span><span class="token number">7</span>
<span class="token comment">## 跳过主从复制中遇到的所有错误或指定类型的错误，避免slave端复制中断。</span>
<span class="token comment">## 如：1062错误是指一些主键重复，1032错误是因为主从数据库数据不一致</span>
<span class="token assign-left variable">slave_skip_errors</span><span class="token operator">=</span><span class="token number">1062</span>
<span class="token comment">## relay_log配置中继日志</span>
<span class="token assign-left variable">relay_log</span><span class="token operator">=</span>mall-mysql-relay-bin
<span class="token comment">## log_slave_updates表示slave将复制事件写进自己的二进制日志</span>
<span class="token assign-left variable">log_slave_updates</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">## slave设置为只读（具有super权限的用户除外）</span>
<span class="token assign-left variable">read_only</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_1-8-重启从mysql"><a href="#_1-8-重启从mysql" class="header-anchor">#</a> 1.8.重启从mysql</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> restart mysqlSlave
<span class="token comment">#查看重启状态</span>
<span class="token punctuation">[</span>root@noed2 conf<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE       COMMAND                  CREATED          STATUS          PORTS                                                  NAMES
b751130910b3   mysql:5.7   <span class="token string">&quot;docker-entrypoint.s…&quot;</span>   <span class="token number">3</span> minutes ago    Up <span class="token number">4</span> seconds    <span class="token number">33060</span>/tcp, <span class="token number">0.0</span>.0.0:3310-<span class="token operator">&gt;</span><span class="token number">3306</span>/tcp, :::3310-<span class="token operator">&gt;</span><span class="token number">3306</span>/tcp   mysqlSlave
5bda1e446335   mysql:5.7   <span class="token string">&quot;docker-entrypoint.s…&quot;</span>   <span class="token number">12</span> minutes ago   Up <span class="token number">12</span> minutes   <span class="token number">33060</span>/tcp, <span class="token number">0.0</span>.0.0:3309-<span class="token operator">&gt;</span><span class="token number">3306</span>/tcp, :::3309-<span class="token operator">&gt;</span><span class="token number">3306</span>/tcp   mysqlMaster
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_1-9-在主mysql3309中查看"><a href="#_1-9-在主mysql3309中查看" class="header-anchor">#</a> 1.9.在主mysql3309中查看</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>mysql<span class="token operator">&gt;</span> show master status<span class="token punctuation">;</span>
+------------------+----------+--------------+------------------+-------------------+
<span class="token operator">|</span> File             <span class="token operator">|</span> Position <span class="token operator">|</span> Binlog_Do_DB <span class="token operator">|</span> Binlog_Ignore_DB <span class="token operator">|</span> Executed_Gtid_Set <span class="token operator">|</span>
+------------------+----------+--------------+------------------+-------------------+
<span class="token operator">|</span> mysql-bin.000001 <span class="token operator">|</span>      <span class="token number">154</span> <span class="token operator">|</span>              <span class="token operator">|</span> mysql            <span class="token operator">|</span>                   <span class="token operator">|</span>
+------------------+----------+--------------+------------------+-------------------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_1-10-进入从库mysql3310"><a href="#_1-10-进入从库mysql3310" class="header-anchor">#</a> 1.10.进入从库mysql3310</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it 实例id /bin/bash
mysql -uroot -p 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img alt="image-20221121125158556" data-src="/assets/img/image-20221121125158556.fcc533e6.png" loading="lazy" class="lazy"></p> <h3 id="_1-11-在从数据库中配置主从复制"><a href="#_1-11-在从数据库中配置主从复制" class="header-anchor">#</a> 1.11.在从数据库中配置主从复制</h3> <p>master_host='主mysql主机ip',mysql-bin.000001为上面第四步中查询File值，154为Position值</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>change master to <span class="token assign-left variable">master_host</span><span class="token operator">=</span><span class="token string">'192.168.233.130'</span>, <span class="token assign-left variable">master_user</span><span class="token operator">=</span><span class="token string">'slave'</span>, <span class="token assign-left variable">master_password</span><span class="token operator">=</span><span class="token string">'123456'</span>, <span class="token assign-left variable">master_port</span><span class="token operator">=</span><span class="token number">3309</span>, <span class="token assign-left variable">master_log_file</span><span class="token operator">=</span><span class="token string">'mysql-bin.000001'</span>, <span class="token assign-left variable">master_log_pos</span><span class="token operator">=</span><span class="token number">154</span>, <span class="token assign-left variable">master_connect_retry</span><span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img alt="image-20221121125643840" data-src="data:image/png;base64,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K7Kaqv2SaPvHW6NrnitVF7M7zBdt5F3i2ewA6MBc+uklVn61u63lbeOydSqtfT6m6AHoTevl61AX0XfQn91hnkpzU20+eciCbb2b6hO0jrPf7t9H+GaBaY0y1Cyfhr+D+dvLExERteTj40Pzpb3HIXzZ41W85PPopbqfHaR1JeXC8GUD29jlwyVeaiyUc1svyb2ycHMvGWZgYGBguP1QfzKFAJCB5Xz+2+ava2ApA+uKJnYMXzGwjV2ijJWlAimi/xdhmTtKXKBunUCJNs/xRYNQgeN//vWIgYGBgeF7hX8+Pj6CP3/+4MePHwCAv3//wjAM3ARpRTs/ea0tgyOi70lIC7OnHjodAPCwXczxknxfFhEREX17tz2ZIiIiIiIi+iSf8NJeIiIiIiKi28fJFBERERERUQ2cTBEREREREdXAyRQREREREVENnEwRERERERHVwMkUERERERFRDZxMERERERER1cDJFBERERERUQ2cTBEREREREdXAyRQREREREVENnEwRERERERHVwMkUERERERFRDZxMERERERER1cDJFBERERERUQ2cTBEREREREdXAyRQREREREVENnEwRERERERHVwMkUERERERFRDZxMERERERER1cDJFBERERERUQ3/++wE3IRAI84/raeCiIiIiIiuCO9MERERERER1cDJFBERERERUQ23O5mSFnzfj4MlPztFRERERET0jdzuZMoewTAMGIaByfazE0NERERERN/N7U6miIiIiIiIPtH/A9ccGNZdj5C8AAAAAElFTkSuQmCC" loading="lazy" class="lazy"></p> <p>主从复制命令参数说明</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>master_host：主数据库的IP地址；
master_port：主数据库的运行端口；
master_user：在主数据库创建的用于同步数据的用户账号；
master_password：在主数据库创建的用于同步数据的用户密码；
master_log_file：指定从数据库要复制数据的日志文件，通过查看主数据的状态，获取<span class="token keyword">File</span>参数；
master_log_pos：指定从数据库从哪个位置开始复制数据，通过查看主数据的状态，获取Position参数；
master_connect_retry：连接失败重试的时间间隔，单位为秒。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_1-12-在从数据库中查看主从同步状态"><a href="#_1-12-在从数据库中查看主从同步状态" class="header-anchor">#</a> 1.12.在从数据库中查看主从同步状态</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#\G的意思是格式转为竖着的，键值对</span>
show slave status <span class="token punctuation">\</span>G<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img alt="image-20221121125841203" data-src="assets/image-20221121125841203.png" loading="lazy" class="lazy"></p> <h3 id="_1-13-在从库中开启主从同步"><a href="#_1-13-在从库中开启主从同步" class="header-anchor">#</a> 1.13.在从库中开启主从同步</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>mysql<span class="token operator">&gt;</span> start slave<span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_1-14-查看从数据库中状态"><a href="#_1-14-查看从数据库中状态" class="header-anchor">#</a> 1.14.查看从数据库中状态</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>show slave status <span class="token punctuation">\</span>G<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img alt="image-20221121131050395" data-src="/assets/img/image-20221121131050395.cfd1a39c.png" loading="lazy" class="lazy"></p> <h3 id="_1-15-主从复制测试"><a href="#_1-15-主从复制测试" class="header-anchor">#</a> 1.15.主从复制测试</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#主库创建数据库数据库添加数据</span>
mysql<span class="token operator">&gt;</span> create database db01<span class="token punctuation">;</span>
Query OK, <span class="token number">1</span> row affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">&gt;</span> use db01<span class="token punctuation">;</span>
Database changed
mysql<span class="token operator">&gt;</span> create table t1 <span class="token punctuation">(</span>id int,name varchar<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">&gt;</span> insert into t1 values<span class="token punctuation">(</span><span class="token number">1</span>,<span class="token string">'t111'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK, <span class="token number">1</span> row affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> * from t1<span class="token punctuation">;</span>
+------+------+
<span class="token operator">|</span> <span class="token function">id</span>   <span class="token operator">|</span> name <span class="token operator">|</span>
+------+------+
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> t111 <span class="token operator">|</span>
+------+------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">&gt;</span> 
<span class="token comment">#从库中查看,发现数据已经同步过来</span>
mysql<span class="token operator">&gt;</span> use db01<span class="token punctuation">;</span>
Reading table information <span class="token keyword">for</span> completion of table and <span class="token function">column</span> names
You can turn off this feature to get a quicker startup with -A
Database changed
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> * from t1<span class="token punctuation">;</span>
+------+------+
<span class="token operator">|</span> <span class="token function">id</span>   <span class="token operator">|</span> name <span class="token operator">|</span>
+------+------+
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> t111 <span class="token operator">|</span>
+------+------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="_2-cluster-集群-模式-docker版"><a href="#_2-cluster-集群-模式-docker版" class="header-anchor">#</a> 2.cluster(集群)模式-docker版</h2> <h3 id="_2-1-哈希槽概念"><a href="#_2-1-哈希槽概念" class="header-anchor">#</a> 2.1.哈希槽概念</h3> <p>1~2亿条数据需要缓存，请问如何设计这个存储案例?</p> <p><mark>哈希槽分区进行亿级数据存储</mark></p> <p>1.哈希槽分区是什么?</p> <p>哈希槽实质就是一个数组，数组[0,2^14 -1]形成hash slot空间。</p> <p>2.能干什么？</p> <p>解决均匀分配的问题，在数据和节点之间又加入了一层，把这层称为哈希槽（slot），用于管理数据和节点之间的关系，现在就相当于节点上放的是槽，槽里放的是数据。</p> <p><img alt="img" data-src="/assets/img/wps2.f1346741.png" loading="lazy" class="lazy"></p> <p>槽解决的是粒度问题，相当于把粒度变大了，这样便于数据移动。</p> <p>哈希解决的是映射问题，使用key的哈希值来计算所在的槽，便于数据分配。</p> <p>3.多少个hash槽？</p> <p>一个集群只能有16384个槽，编号0-16383（0-2^14-1）。这些槽会分配给集群中的所有主节点，分配策略没有要求。可以指定哪些编号的槽分配给哪个主节点。集群会记录节点和槽的对应关系。解决了节点和槽的关系后，接下来就需要对key求哈希值，然后对16384取余，余数是几key就落入对应的槽里。slot = CRC16(key) % 16384。以槽为单位移动数据，因为槽的数目是固定的，处理起来比较容易，这样数据移动问题就解决了。</p> <p>4.哈希槽计算？</p> <p>Redis 集群中内置了 16384 个哈希槽，redis 会根据节点数量大致均等的将哈希槽映射到不同的节点。当需要在 Redis 集群中放置一个 key-value时，redis 先对 key 使用 crc16 算法算出一个结果，然后把结果对 16384 求余数，这样每个 key 都会对应一个编号在 0-16383 之间的哈希槽，也就是映射到某个节点上。如下代码，key之A 、B在Node2， key之C落在Node3上</p> <p><img alt="image-20221121165759539" data-src="/assets/img/image-20221121165759539.e4faf0db.png" loading="lazy" class="lazy"></p> <p><img alt="image-20221121165824310" data-src="/assets/img/image-20221121165824310.eaee29ca.png" loading="lazy" class="lazy"></p> <h2 id="_3-cluster-集群-实战"><a href="#_3-cluster-集群-实战" class="header-anchor">#</a> 3.cluster(集群)实战</h2> <h3 id="_3-1-3主3从redis集群扩缩容配置案例架构说明"><a href="#_3-1-3主3从redis集群扩缩容配置案例架构说明" class="header-anchor">#</a> 3.1.3主3从redis集群扩缩容配置案例架构说明</h3> <p><img alt="image-20221121170044511" data-src="/assets/img/image-20221121170044511.f0bd12a0.png" loading="lazy" class="lazy"></p> <h3 id="_3-2主3从redis集群配置步骤"><a href="#_3-2主3从redis集群配置步骤" class="header-anchor">#</a> 3.2主3从redis集群配置步骤</h3> <h4 id="_1-关闭防火墙-启动docker后台服务"><a href="#_1-关闭防火墙-启动docker后台服务" class="header-anchor">#</a> 1.关闭防火墙+启动docker后台服务</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>systemctl start <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2-新建6个docker容器实例"><a href="#_2-新建6个docker容器实例" class="header-anchor">#</a> 2.新建6个docker容器实例</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> run -d --name redis-node-1 --net <span class="token function">host</span> --privileged<span class="token operator">=</span>true -v /data/redis/share/redis-node-1:/data redis:6.0.8 --cluster-enabled <span class="token function">yes</span> --appendonly <span class="token function">yes</span> --port <span class="token number">6381</span>
<span class="token function">docker</span> run -d --name redis-node-2 --net <span class="token function">host</span> --privileged<span class="token operator">=</span>true -v /data/redis/share/redis-node-2:/data redis:6.0.8 --cluster-enabled <span class="token function">yes</span> --appendonly <span class="token function">yes</span> --port <span class="token number">6382</span>
<span class="token function">docker</span> run -d --name redis-node-3 --net <span class="token function">host</span> --privileged<span class="token operator">=</span>true -v /data/redis/share/redis-node-3:/data redis:6.0.8 --cluster-enabled <span class="token function">yes</span> --appendonly <span class="token function">yes</span> --port <span class="token number">6383</span>
<span class="token function">docker</span> run -d --name redis-node-4 --net <span class="token function">host</span> --privileged<span class="token operator">=</span>true -v /data/redis/share/redis-node-4:/data redis:6.0.8 --cluster-enabled <span class="token function">yes</span> --appendonly <span class="token function">yes</span> --port <span class="token number">6384</span>
<span class="token function">docker</span> run -d --name redis-node-5 --net <span class="token function">host</span> --privileged<span class="token operator">=</span>true -v /data/redis/share/redis-node-5:/data redis:6.0.8 --cluster-enabled <span class="token function">yes</span> --appendonly <span class="token function">yes</span> --port <span class="token number">6385</span>
<span class="token function">docker</span> run -d --name redis-node-6 --net <span class="token function">host</span> --privileged<span class="token operator">=</span>true -v /data/redis/share/redis-node-6:/data redis:6.0.8 --cluster-enabled <span class="token function">yes</span> --appendonly <span class="token function">yes</span> --port <span class="token number">6386</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><mark>如果运行成功，效果如下：</mark></p> <p><img alt="image-20221121170747458" data-src="/assets/img/image-20221121170747458.61ee5e91.png" loading="lazy" class="lazy"></p> <p>参数解释</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>·命令分步解释
·docker run
·创建并运行docker容器实例
·--name redis-node-6
·容器名字
·--net <span class="token function">host</span>
·使用宿主机的IP和端口，默认
·--privileged<span class="token operator">=</span>true
·获取宿主机root用户权限
·-v /data/redis/share/redis-node-6:/data
·容器卷，宿主机地址:docker内部地址
·redis:6.0.8
·redis镜像和版本号
·--cluster-enabled <span class="token function">yes</span>
·开启redis集群
·--appendonly <span class="token function">yes</span>
·开启持久化
·--port <span class="token number">6386</span>
·redis端口号
·进入容器redis-node-1并为6台机器构建集群关系
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="_3-构建主从关系"><a href="#_3-构建主从关系" class="header-anchor">#</a> 3.构建主从关系</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#进入容器1</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it redis-node-1 /bin/bash
<span class="token comment">#构建主从关系</span>
<span class="token comment">#注意，进入docker容器后才能执行一下命令，且注意自己的真实IP地址</span>
redis-cli --cluster create <span class="token number">192.168</span>.233.130:6381 <span class="token number">192.168</span>.233.130:6382 <span class="token number">192.168</span>.233.130:6383 <span class="token number">192.168</span>.233.130:6384 <span class="token number">192.168</span>.233.130:6385 <span class="token number">192.168</span>.233.130:6386 --cluster-replicas <span class="token number">1</span>
<span class="token comment">#--cluster-replicas 1 表示为每个master创建一个slave节点</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img alt="image-20221121171440240" data-src="/assets/img/image-20221121171440240.8c034034.png" loading="lazy" class="lazy"></p> <p><img alt="image-20221121171526367" data-src="/assets/img/image-20221121171526367.23fe8e62.png" loading="lazy" class="lazy"></p> <h4 id="_4-以6381为例来查看集群信息"><a href="#_4-以6381为例来查看集群信息" class="header-anchor">#</a> 4.以6381为例来查看集群信息</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>root<span class="token variable">@noed2</span>:<span class="token operator">/</span><span class="token keyword">data</span><span class="token comment"># redis-cli -p 6381</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6381</span><span class="token operator">&gt;</span> cluster info
cluster_state:ok
cluster_slots_assigned:<span class="token number">16384</span>
cluster_slots_ok:<span class="token number">16384</span>
cluster_slots_pfail:<span class="token number">0</span>
cluster_slots_fail:<span class="token number">0</span>
cluster_known_nodes:<span class="token number">6</span>
cluster_size:<span class="token number">3</span>
cluster_current_epoch:<span class="token number">6</span>
cluster_my_epoch:<span class="token number">1</span>
cluster_stats_messages_ping_sent:<span class="token number">132</span>
cluster_stats_messages_pong_sent:<span class="token number">131</span>
cluster_stats_messages_sent:<span class="token number">263</span>
cluster_stats_messages_ping_received:<span class="token number">126</span>
cluster_stats_messages_pong_received:<span class="token number">132</span>
cluster_stats_messages_meet_received:<span class="token number">5</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6381</span><span class="token operator">&gt;</span> cluster nodes
b7549eddd980203b695520f647d62ba6dbaa6bd0 <span class="token number">192.168</span><span class="token number">.233</span><span class="token number">.130</span>:<span class="token number">6385</span><span class="token variable">@16385</span> slave <span class="token number">7401</span>b80836acf83724618d778bda5ba56599c165 <span class="token number">0</span> <span class="token number">1669022277105</span> <span class="token number">1</span> connected
<span class="token number">45</span>b7b0d4cd3ed1ff6e7bcbc581d902a1a5861f0e <span class="token number">192.168</span><span class="token number">.233</span><span class="token number">.130</span>:<span class="token number">6384</span><span class="token variable">@16384</span> slave <span class="token number">2</span>f5af54bacdb16528ae8300972f66d0040eba578 <span class="token number">0</span> <span class="token number">1669022276000</span> <span class="token number">3</span> connected
e3bf194e2e32ada172893968cc0168781cb517c6 <span class="token number">192.168</span><span class="token number">.233</span><span class="token number">.130</span>:<span class="token number">6386</span><span class="token variable">@16386</span> slave <span class="token number">3</span>c0c61cb3c67a3e3dd241d0911604737dbf5d6bc <span class="token number">0</span> <span class="token number">1669022277000</span> <span class="token number">2</span> connected
<span class="token number">2</span>f5af54bacdb16528ae8300972f66d0040eba578 <span class="token number">192.168</span><span class="token number">.233</span><span class="token number">.130</span>:<span class="token number">6383</span><span class="token variable">@16383</span> master <span class="token operator">-</span> <span class="token number">0</span> <span class="token number">1669022278121</span> <span class="token number">3</span> connected <span class="token number">10923</span><span class="token operator">-</span><span class="token number">16383</span>
<span class="token number">7401</span>b80836acf83724618d778bda5ba56599c165 <span class="token number">192.168</span><span class="token number">.233</span><span class="token number">.130</span>:<span class="token number">6381</span><span class="token variable">@16381</span> myself<span class="token punctuation">,</span>master <span class="token operator">-</span> <span class="token number">0</span> <span class="token number">1669022274000</span> <span class="token number">1</span> connected <span class="token number">0</span><span class="token operator">-</span><span class="token number">5460</span>
<span class="token number">3</span>c0c61cb3c67a3e3dd241d0911604737dbf5d6bc <span class="token number">192.168</span><span class="token number">.233</span><span class="token number">.130</span>:<span class="token number">6382</span><span class="token variable">@16382</span> master <span class="token operator">-</span> <span class="token number">0</span> <span class="token number">1669022275057</span> <span class="token number">2</span> connected <span class="token number">5461</span><span class="token operator">-</span><span class="token number">10922</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6381</span><span class="token operator">&gt;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p><img alt="image-20221121172123536" data-src="/assets/img/image-20221121172123536.d11fbfe6.png" loading="lazy" class="lazy"></p> <p>从上面可以看出：85挂在81下面，84挂在83下面，86挂在82下面</p> <h3 id="_3-3-验证"><a href="#_3-3-验证" class="header-anchor">#</a> 3.3.验证</h3> <p>对6381新增两个key</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#连接81服务</span>
redis-cli -p <span class="token number">6381</span>  <span class="token comment">#这种是单机版</span>
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token builtin class-name">set</span> k1 v1
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> MOVED <span class="token number">12706</span> <span class="token number">192.168</span>.233.130:6383
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token builtin class-name">set</span> k2 v2
OK
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token builtin class-name">set</span> k3 v3
OK
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token builtin class-name">set</span> k4 v4
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> MOVED <span class="token number">8455</span> <span class="token number">192.168</span>.233.130:6382
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>加入参数-c，优化路由，集群链接</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>root@noed2:/data<span class="token comment"># redis-cli -p 6381 -c</span>
<span class="token number">192.168</span>.233.130:638<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token builtin class-name">set</span> k1 v1
-<span class="token operator">&gt;</span> Redirected to slot <span class="token punctuation">[</span><span class="token number">12706</span><span class="token punctuation">]</span> located at <span class="token number">192.168</span>.233.130:6383
OK
<span class="token number">192.168</span>.233.130:638<span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> <span class="token builtin class-name">set</span> k2 v2
-<span class="token operator">&gt;</span> Redirected to slot <span class="token punctuation">[</span><span class="token number">449</span><span class="token punctuation">]</span> located at <span class="token number">192.168</span>.233.130:6381
OK
<span class="token number">192.168</span>.233.130:638<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token builtin class-name">set</span> k3 v3
OK
<span class="token number">192.168</span>.233.130:638<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token builtin class-name">set</span> k4 v4
-<span class="token operator">&gt;</span> Redirected to slot <span class="token punctuation">[</span><span class="token number">8455</span><span class="token punctuation">]</span> located at <span class="token number">192.168</span>.233.130:6382
OK
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>查看集群信息</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>redis<span class="token operator">-</span>cli <span class="token comment">--cluster check 192.168.233.130:6381</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img alt="image-20221121173654491" data-src="/assets/img/image-20221121173654491.d0254abb.png" loading="lazy" class="lazy"></p> <h3 id="_3-4-容错切换迁移案例"><a href="#_3-4-容错切换迁移案例" class="header-anchor">#</a> 3.4.容错切换迁移案例</h3> <h4 id="_1-演示主6381和从机切换"><a href="#_1-演示主6381和从机切换" class="header-anchor">#</a> 1.演示主6381和从机切换</h4> <p>1先停止主机6381,中间需要等待一会儿，docker集群重新响应</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>docker stop redis<span class="token operator">-</span>node<span class="token operator">-</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.进入6382，查看集群信息</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it redis-node-2 <span class="token function">bash</span>
redis-cli -p <span class="token number">6382</span> -c
cluster nodes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>6381作为1号主机分配的从机以实际情况为准，具体是几号机器就是几号</p> <p><img alt="image-20221121174509319" data-src="/assets/img/image-20221121174509319.a3884d60.png" loading="lazy" class="lazy"></p> <p>3.重新启动81机器</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> start redis-node-1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时发现，81是从节点，85是主节点</p> <p><img alt="image-20221121174940745" data-src="/assets/img/image-20221121174940745.6dcaeb36.png" loading="lazy" class="lazy"></p> <p>如果想让81再成为主节点，那么把85停了，然后过一会再启动</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#停止85</span>
<span class="token function">docker</span> stop redis-node-5
<span class="token comment">#再启动85</span>
<span class="token function">docker</span> start redis-node-5
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>可以看到81变成了master,85变成了slave</p> <p><img alt="image-20221121175247187" data-src="/assets/img/image-20221121175247187.e5023ba1.png" loading="lazy" class="lazy"></p> <h3 id="_3-5-主从扩容案例"><a href="#_3-5-主从扩容案例" class="header-anchor">#</a> 3.5.主从扩容案例</h3> <p>1.新建6387、6388两个节点+新建后启动+查看是否8节点</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> run -d --name redis-node-7 --net <span class="token function">host</span> --privileged<span class="token operator">=</span>true -v /data/redis/share/redis-node-7:/data redis:6.0.8 --cluster-enabled <span class="token function">yes</span> --appendonly <span class="token function">yes</span> --port <span class="token number">6387</span>
<span class="token function">docker</span> run -d --name redis-node-8 --net <span class="token function">host</span> --privileged<span class="token operator">=</span>true -v /data/redis/share/redis-node-8:/data redis:6.0.8 --cluster-enabled <span class="token function">yes</span> --appendonly <span class="token function">yes</span> --port <span class="token number">6388</span>
<span class="token function">docker</span> <span class="token function">ps</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>2.进入6387容器实例内部</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it redis-node-7 /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3.将新增的6387节点(空槽号)作为master节点加入原集群</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#将新增的6387作为master节点加入集群</span>
<span class="token comment">#redis-cli --cluster add-node 自己实际IP地址:6387 自己实际IP地址:6381</span>
<span class="token comment">#6387 就是将要作为master新增节点</span>
<span class="token comment">#6381 就是原来集群节点里面的领路人，相当于6387拜拜6381的码头从而找到组织加入集群</span>
redis-cli --cluster add-node <span class="token number">192.168</span>.233.130:6387 <span class="token number">192.168</span>.233.130:6381
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img alt="image-20221122091546047" data-src="/assets/img/image-20221122091546047.1a19d54d.png" loading="lazy" class="lazy"></p> <p>4.检查集群情况第1次</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#redis-cli --cluster check 真实ip地址:6381</span>
redis-cli --cluster check <span class="token number">192.168</span>.233.130:6381
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img alt="image-20221122092110287" data-src="/assets/img/image-20221122092110287.a2d1a75d.png" loading="lazy" class="lazy"></p> <p>5.重新分配槽号</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#命令:redis-cli --cluster reshard IP地址:端口号</span>
redis-cli --cluster reshard <span class="token number">192.168</span>.233.130:6381
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img alt="image-20221122093153946" data-src="/assets/img/image-20221122093153946.70cc5fb9.png" loading="lazy" class="lazy"></p> <p>all，重新分配槽位</p> <p><img alt="image-20221122093630241" data-src="/assets/img/image-20221122093630241.2e7ff8a1.png" loading="lazy" class="lazy"></p> <p>6.检查集群情况第2次</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#redis-cli --cluster check 真实ip地址:6381</span>
redis-cli --cluster check <span class="token number">192.168</span>.233.130:6381
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>槽号分派说明</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>为什么6387是3个新的区间，以前的还是连续？
重新分配成本太高，所以前3家各自匀出来一部分，从6381/6382/6383三个旧节点分别匀出1364个坑位给新节点6387,
<span class="token number">6387</span>一共4096个槽位
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img alt="image-20221122093928082" data-src="/assets/img/image-20221122093928082.024ef816.png" loading="lazy" class="lazy"></p> <p>7.为主节点6387分配从节点6388</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#命令：redis-cli --cluster add-node ip:新slave端口 ip:新master端口 --cluster-slave --cluster-master-id 新主机节点ID</span>
<span class="token comment">#89dbd86ead1865d2aff5b372be398b8c16d899ee的值可以通过redis-cli --cluster check 192.168.233.130:6381 查看是6387的节点id</span>
redis-cli --cluster add-node <span class="token number">192.168</span>.233.130:6388 <span class="token number">192.168</span>.233.130:6387 --cluster-slave --cluster-master-id 89dbd86ead1865d2aff5b372be398b8c16d899ee
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img alt="image-20221122094534247" data-src="/assets/img/image-20221122094534247.22a2715d.png" loading="lazy" class="lazy"></p> <p>8.检查集群情况第3次</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#检查哪个都可以</span>
redis-cli --cluster check <span class="token number">192.168</span>.233.130:6382
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>可以看到四主四从</p> <p><img alt="image-20221122094710761" data-src="/assets/img/image-20221122094710761.1d989344.png" loading="lazy" class="lazy"></p> <h3 id="_3-6-主从缩容案例"><a href="#_3-6-主从缩容案例" class="header-anchor">#</a> 3.6.主从缩容案例</h3> <p><strong>目的：6387和6388下线</strong></p> <h4 id="_1-操作步骤说明"><a href="#_1-操作步骤说明" class="header-anchor">#</a> 1.操作步骤说明</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>先清除从节点<span class="token number">6388</span>
<span class="token number">2.</span>清出来的槽重新分配
<span class="token number">3.</span>再删除<span class="token number">6387</span>
<span class="token number">4.</span>恢复成<span class="token number">3</span>主<span class="token number">3</span>从
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>1.检查集群情况1获得6388的节点ID</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>redis-cli --cluster check <span class="token number">192.168</span>.233.130:6382
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img alt="image-20221122094910589" data-src="/assets/img/image-20221122094910589.03d6cfb6.png" loading="lazy" class="lazy"></p> <p>2.将6388删除 从集群中将4号从节点6388删除</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#命令：redis-cli --cluster del-node ip:从机端口 从机6388节点ID</span>
redis-cli --cluster del-node <span class="token number">192.168</span>.233.130:6388 f5d0925cda5ac3d14bab5e38f05f2facf35e808f
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img alt="image-20221122095348868" data-src="/assets/img/image-20221122095348868.446b57f2.png" loading="lazy" class="lazy"></p> <p>3.检查</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>redis-cli --cluster check <span class="token number">192.168</span>.233.130:6382
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img alt="image-20221122095446496" data-src="/assets/img/image-20221122095446496.4bde50fc.png" loading="lazy" class="lazy"></p> <p>可以看到6388已经被删除了</p> <p>4.将6387的槽号清空，重新分配，本例将清出来的槽号都给6381</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>redis-cli --cluster reshard <span class="token number">192.168</span>.233.130:6381
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img alt="image-20221122100101333" data-src="/assets/img/image-20221122100101333.9266b8d9.png" loading="lazy" class="lazy"></p> <p>5.检查集群情况第二次</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>redis-cli --cluster check <span class="token number">192.168</span>.233.130:6381
<span class="token number">4096</span>个槽位都指给6381，它变成了8192个槽位，相当于全部都给6381了，不然要输入3次，一锅端
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img alt="image-20221122100315179" data-src="/assets/img/image-20221122100315179.aa37bad3.png" loading="lazy" class="lazy"></p> <p>6.将6387删除</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#命令：redis-cli --cluster del-node ip:端口 6387节点ID</span>
redis-cli --cluster del-node <span class="token number">192.168</span>.233.130:6387 89dbd86ead1865d2aff5b372be398b8c16d899ee
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img alt="image-20221122100431962" data-src="/assets/img/image-20221122100431962.cf120d68.png" loading="lazy" class="lazy"></p> <p>7.检查集群情况第三次</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>redis-cli --cluster check <span class="token number">192.168</span>.233.130:6381
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以看到，又变成了3主3从</p> <p><img alt="image-20221122100539445" data-src="/assets/img/image-20221122100539445.88f08210.png" loading="lazy" class="lazy"></p> <p>end；</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/502051565/502051565.github.io/edit/master/docs/studynotes/project-management/Docker2/1.Docker_introduction_mysql_cluster.md" target="_blank" rel="noopener noreferrer">帮助我改善此页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=Docker" title="标签">#Docker</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022年11月22日</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/project-management/Docker/8.Docker_Software_installation/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Docker 软件安装</div></a> <a href="/project-management/Docker2/2.Docker_Dockerfile/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Dockerfile</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/project-management/Docker/8.Docker_Software_installation/" class="prev">Docker 软件安装</a></span> <span class="next"><a href="/project-management/Docker2/2.Docker_Dockerfile/">Dockerfile</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/3lhq91/"><div>
            jvm
            <!----></div></a> <span class="date">06-01</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/3lhh91/"><div>
            多线程&amp;并发篇
            <!----></div></a> <span class="date">05-30</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/3lhl98/"><div>
            spring
            <!----></div></a> <span class="date">05-30</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:502051565@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="img/wx.jpg" title="微信" target="_blank" class="iconfont icon-weixin"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><APlayer audio="" fixed="true" mini="true" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div></div><div></div><div></div><div id="tcomment"></div><!----></div></div>
    <script src="/assets/js/app.52078691.js" defer></script><script src="/assets/js/2.3705e0fd.js" defer></script><script src="/assets/js/6.145042a1.js" defer></script><script src="/assets/js/41.f9580004.js" defer></script><script src="/assets/js/62.88bcb186.js" defer></script><script src="/assets/js/68.17898152.js" defer></script><script src="/assets/js/53.6e4f0023.js" defer></script><script src="/assets/js/54.7ab2b710.js" defer></script>
  </body>
</html>
